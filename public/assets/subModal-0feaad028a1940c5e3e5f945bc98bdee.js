/**
 * SUBMODAL v1.6
 * Used for displaying DHTML only popups instead of using buggy modal windows.
 *
 * By Subimage LLC
 * http://www.subimage.com
 *
 * Contributions by:
 * 	Eric Angel - tab index code
 * 	Scott - hiding/showing selects for IE users
 *	Todd Huss - inserting modal dynamically and anchor classes
 *
 * Up to date code can be found at http://submodal.googlecode.com
 */
// Popup code
function initPopUp(){theBody=document.getElementsByTagName("BODY")[0],popmask=document.createElement("div"),popmask.id="popupMask",popcont=document.createElement("div"),popcont.id="popupContainer",popcont.innerHTML='<div id="popupInner"><div id="popupTitleBar"><div id="popupTitle"></div><div id="popupControls"><img src="close.gif" onclick="hidePopWin(false);" id="popCloseBox" /></div></div><iframe src="'+gDefaultPage+'" style="width:100%;height:100%;background-color:transparent;" scrolling="auto" frameborder="0" allowtransparency="true" id="popupFrame" name="popupFrame" width="100%" height="100%"></iframe>'+"</div>",theBody.appendChild(popmask),theBody.appendChild(popcont),gPopupMask=document.getElementById("popupMask"),gPopupContainer=document.getElementById("popupContainer"),gPopFrame=document.getElementById("popupFrame");var a=parseInt(window.navigator.appVersion.charAt(0),10);a<=6&&window.navigator.userAgent.indexOf("MSIE")>-1&&(gHideSelects=!0);var b=document.getElementsByTagName("a");for(i=0;i<b.length;i++)b[i].className.indexOf("submodal")==0&&(b[i].onclick=function(){var a=400,b=200;return params=this.className.split("-"),params.length==3&&(a=parseInt(params[1]),b=parseInt(params[2])),showPopWin(this.href,a,b,null),!1})}function showPopWin(a,b,c,d,e){e==null||e==1?document.getElementById("popCloseBox").style.display="block":document.getElementById("popCloseBox").style.display="none",gPopupIsShown=!0,disableTabIndexes(),gPopupMask.style.display="block",gPopupContainer.style.display="block",centerPopWin(b,c);var f=parseInt(document.getElementById("popupTitleBar").offsetHeight,10);gPopupContainer.style.width=b+"px",gPopupContainer.style.height=c+f+"px",setMaskSize(),gPopFrame.style.width=parseInt(document.getElementById("popupTitleBar").offsetWidth,10)+"px",gPopFrame.style.height=c+"px",gPopFrame.src=a,gReturnFunc=d,gHideSelects==1&&hideSelectBoxes(),window.setTimeout("setPopTitle();",600)}function centerPopWin(a,b){if(gPopupIsShown==1){if(a==null||isNaN(a))a=gPopupContainer.offsetWidth;b==null&&(b=gPopupContainer.offsetHeight);var c=document.getElementsByTagName("BODY")[0],d=parseInt(getScrollTop(),10),e=parseInt(c.scrollLeft,10);setMaskSize();var f=parseInt(document.getElementById("popupTitleBar").offsetHeight,10),g=getViewportHeight(),h=getViewportWidth();gPopupContainer.style.top=d+(g-(b+f))/2+"px",gPopupContainer.style.left=e+(h-a)/2+"px"}}function setMaskSize(){var a=document.getElementsByTagName("BODY")[0],b=getViewportHeight(),c=getViewportWidth();b>a.scrollHeight?popHeight=b:popHeight=a.scrollHeight,c>a.scrollWidth?popWidth=c:popWidth=a.scrollWidth,gPopupMask.style.height=popHeight+"px",gPopupMask.style.width=popWidth+"px"}function hidePopWin(a){gPopupIsShown=!1;var b=document.getElementsByTagName("BODY")[0];b.style.overflow="",restoreTabIndexes();if(gPopupMask==null)return;gPopupMask.style.display="none",gPopupContainer.style.display="none",a==1&&gReturnFunc!=null&&(gReturnVal=window.frames.popupFrame.returnVal,window.setTimeout("gReturnFunc(gReturnVal);",1)),gPopFrame.src=gDefaultPage,gHideSelects==1&&displaySelectBoxes()}function setPopTitle(){return}function keyDownHandler(a){if(gPopupIsShown&&a.keyCode==9)return!1}function disableTabIndexes(){if(document.all){var a=0;for(var b=0;b<gTabbableTags.length;b++){var c=document.getElementsByTagName(gTabbableTags[b]);for(var d=0;d<c.length;d++)gTabIndexes[a]=c[d].tabIndex,c[d].tabIndex="-1",a++}}}function restoreTabIndexes(){if(document.all){var a=0;for(var b=0;b<gTabbableTags.length;b++){var c=document.getElementsByTagName(gTabbableTags[b]);for(var d=0;d<c.length;d++)c[d].tabIndex=gTabIndexes[a],c[d].tabEnabled=!0,a++}}}function hideSelectBoxes(){var a=document.getElementsByTagName("SELECT");for(i=0;a&&i<a.length;i++)a[i].style.visibility="hidden"}function displaySelectBoxes(){var a=document.getElementsByTagName("SELECT");for(i=0;a&&i<a.length;i++)a[i].style.visibility="visible"}var gPopupMask=null,gPopupContainer=null,gPopFrame=null,gReturnFunc,gPopupIsShown=!1,gDefaultPage="/loading.html",gHideSelects=!1,gReturnVal=null,gTabIndexes=new Array,gTabbableTags=new Array("A","BUTTON","TEXTAREA","INPUT","IFRAME");document.all||(document.onkeypress=keyDownHandler),addEvent(window,"load",initPopUp);var gi=0;addEvent(window,"resize",centerPopWin),addEvent(window,"scroll",centerPopWin),window.onscroll=centerPopWin;